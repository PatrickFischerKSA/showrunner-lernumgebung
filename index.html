<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Showrunner Lab | Lernumgebung</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <video class="bg-video" autoplay muted loop playsinline>
    <source src="./assets/jenny_background.mp4" type="video/mp4">
  </video>
  <div class="bg-vignette" aria-hidden="true"></div>
  <div class="bg-gradient" aria-hidden="true"></div>

  <main class="app-shell">
    <header class="hero">
      <p class="kicker">Digitale Lernumgebung</p>
      <h1>Vom Roman zur Serienidee bis zum Pitch</h1>
      <p class="hero-copy">Kleinschrittiger Showrunner-Workflow für Lernende ohne Vorerfahrung: Textarbeit, Gesamtkonzept, Drehbuchausschnitt, modellgenerierte Modellszene und finaler Jury-Pitch.</p>
      <div class="hero-actions">
        <button type="button" id="export-all-json">Gesamtprojekt exportieren</button>
        <button type="button" id="import-all-json">Gesamtprojekt importieren</button>
        <button type="button" id="export-dossier-md">Dossier als Markdown</button>
      </div>
      <div class="view-controls">
        <label class="view-control">
          <span class="control-head">Filmsichtbarkeit <strong id="bg-visibility-value">88%</strong></span>
          <input id="bg-visibility" type="range" min="30" max="100" step="1" value="88">
        </label>
        <label class="view-control">
          <span class="control-head">Textlesbarkeit der Karten <strong id="card-opacity-value">58%</strong></span>
          <input id="card-opacity" type="range" min="25" max="92" step="1" value="58">
        </label>
      </div>
      <div class="view-presets">
        <button type="button" class="ghost" id="preset-film">Film stärker sichtbar</button>
        <button type="button" class="ghost" id="preset-balanced">Ausgewogen</button>
        <button type="button" class="ghost" id="preset-text">Text maximal lesbar</button>
        <button type="button" id="reset-visuals">Zurücksetzen</button>
      </div>
      <p class="subtle view-help">Steuerung: Links = weniger, rechts = mehr. Presets setzen beide Regler gleichzeitig und sind die schnellste Variante.</p>
      <p class="subtle view-help" id="view-state">Aktuell: Ausgewogen.</p>
    </header>

    <nav class="tabbar" aria-label="Hauptnavigation">
      <button class="tab active" data-tab="dashboard">Dashboard</button>
      <button class="tab" data-tab="phases">Lernpfad</button>
      <button class="tab" data-tab="checkpoints">Checkpoints</button>
      <button class="tab" data-tab="decision">Decision System</button>
      <button class="tab" data-tab="pitch">Pitch-Lab</button>
      <button class="tab" data-tab="exports">Export-Zentrale</button>
    </nav>

    <section class="panel active" id="dashboard">
      <div class="grid two">
        <article class="card">
          <h2>Projekt-Setup</h2>
          <div class="field-grid" id="meta-fields"></div>
          <label class="checkbox-line"><input type="checkbox" id="pk-buchgraph"> Vorkenntnis geprüft: <a href="https://patrickfischerksa.github.io/jenny-buchgraph/" target="_blank" rel="noreferrer">Jenny-Buchgraph</a></label>
          <label class="checkbox-line"><input type="checkbox" id="pk-figuren"> Vorkenntnis geprüft: <a href="https://patrickfischerksa.github.io/lewald_jenny_figuren/" target="_blank" rel="noreferrer">Figurenübersicht</a></label>
          <p class="subtle">Wenn ein Link nicht erreichbar ist, die Vorkenntnisse kurz im Team mündlich sichern.</p>
        </article>

        <article class="card">
          <h2>Fortschritt</h2>
          <div class="progress-wrap">
            <div class="progress-label"><span>Gesamtfortschritt</span><strong id="progress-value">0%</strong></div>
            <div class="progress-bar"><span id="progress-fill"></span></div>
          </div>
          <p id="next-step" class="next-step"></p>
          <ul class="stats" id="stats"></ul>
        </article>
      </div>

      <div class="grid two">
        <article class="card">
          <h2>Roman-Starttext (Auszug)</h2>
          <pre id="text-excerpt" class="excerpt">Lade Textauszug ...</pre>
        </article>

        <article class="card">
          <h2>10-Phasen-Fahrplan</h2>
          <ol id="timeline" class="timeline"></ol>
        </article>
      </div>

      <article class="card">
        <h2>Anleitungsvideo: Die TV-Schreibmaschine</h2>
        <p class="subtle">Das Video zeigt den Arbeitsprozess als konkrete Handlungsanleitung fuer die Lernphasen.</p>
        <video class="guide-video" controls preload="metadata">
          <source src="./assets/tv-schreibmaschine-anleitung.mp4" type="video/mp4">
          Dein Browser unterstuetzt dieses Videoformat nicht.
        </video>
      </article>
    </section>

    <section class="panel" id="phases">
      <div class="grid split">
        <aside class="card sticky" id="phase-nav"></aside>
        <div class="card" id="phase-content"></div>
      </div>
    </section>

    <section class="panel" id="checkpoints">
      <div class="card">
        <h2>6 verpflichtende Gruppenberichte</h2>
        <p class="subtle">Jeder Checkpoint enthält den standardisierten Berichtsraster aus dem Showrunner Master Template.</p>
      </div>
      <div id="checkpoint-list" class="checkpoint-list"></div>
    </section>

    <section class="panel" id="decision">
      <div class="card">
        <h2>Showrunner Decision System</h2>
        <p>Wähle ein Problem aus und arbeite die Diagnosefragen ab, bevor ihr etwas am Konzept ändert.</p>
        <label>
          Problemtyp
          <select id="symptom-select"></select>
        </label>
        <div id="decision-card" class="decision-card"></div>
      </div>
    </section>

    <section class="panel" id="pitch">
      <div class="grid two">
        <article class="card">
          <h2>Pitch-Struktur (10 + 5 Minuten)</h2>
          <div id="pitch-fields" class="field-grid"></div>
          <div class="timer-wrap">
            <div><strong id="pitch-timer">10:00</strong><span> Pitchzeit</span></div>
            <div><strong id="qa-timer">05:00</strong><span> Q&A</span></div>
          </div>
          <div class="button-row">
            <button type="button" id="start-pitch-timer">Pitch starten</button>
            <button type="button" id="start-qa-timer">Q&A starten</button>
            <button type="button" id="reset-timer">Timer reset</button>
          </div>
        </article>

        <article class="card">
          <h2>Bewertungsrubrik</h2>
          <div id="rubric"></div>
          <p class="score">Gesamtscore: <strong id="rubric-total">0</strong> / 25</p>
        </article>
      </div>
    </section>

    <section class="panel" id="exports">
      <div class="grid two">
        <article class="card">
          <h2>Import / Export</h2>
          <div class="button-col">
            <button type="button" id="export-all-json-2">Gesamtprojekt exportieren (JSON)</button>
            <button type="button" id="import-all-json-2">Gesamtprojekt importieren (JSON)</button>
            <button type="button" id="export-checkpoints-md">Alle Checkpoints als Markdown</button>
            <button type="button" id="export-pitch-md">Pitch-Manuskript als Markdown</button>
          </div>
        </article>

        <article class="card">
          <h2>Didaktischer Fokus Selbstwirksamkeit</h2>
          <ul class="method-list">
            <li>Mikroziele pro Phase festlegen</li>
            <li>Hindernisse antizipieren und Hilfsstrategie planen</li>
            <li>Fortschritt sichtbar machen statt nur Endprodukt bewerten</li>
            <li>Kurze Reflexion nach jedem Checkpoint</li>
            <li>Peer-Feedback an klaren Kriterien orientieren</li>
          </ul>
          <p class="subtle">Zusatzwissen Drehbuchpraxis:</p>
          <ul class="method-list">
            <li><a href="https://filmpuls.info/drehbuch-schreiben/" target="_blank" rel="noreferrer">Filmpuls: Drehbuch schreiben</a></li>
            <li><a href="https://de.wikihow.com/Ein-Drehbuch-f%C3%BCr-eine-Fernsehserie-schreiben" target="_blank" rel="noreferrer">WikiHow: Drehbuch fuer Fernsehserie</a></li>
            <li><a href="./assets/Serienschreiben.pdf" target="_blank" rel="noreferrer">Serienschreiben.pdf</a></li>
          </ul>
        </article>
      </div>
      <div class="card">
        <h2>Materialbibliothek (dauerhaft)</h2>
        <p class="subtle">Dateien werden im Browser dauerhaft in IndexedDB gespeichert. Optional wird persistenter Speicher angefragt.</p>
        <div class="button-row">
          <button type="button" id="materials-add">Materialien hinzufügen</button>
          <button type="button" id="materials-persist">Dauerhafte Speicherung aktivieren</button>
          <button type="button" id="materials-export">Materialien sichern (JSON)</button>
          <button type="button" id="materials-import">Materialien wiederherstellen</button>
          <span id="materials-status" class="subtle"></span>
        </div>
        <div id="materials-list" class="materials-list"></div>
      </div>
    </section>

    <footer class="footer">
      <small>Showrunner Lernumgebung | Stand: 27.02.2026 | Lokale Speicherung im Browser (localStorage + IndexedDB)</small>
    </footer>
  </main>

  <input type="file" id="import-file" accept="application/json" hidden>
  <input type="file" id="materials-file-input" multiple hidden>
  <input type="file" id="materials-import-file" accept="application/json" hidden>

  <script src="./app.js"></script>
</body>
</html>
